var Re=Object.defineProperty;var Ue=(t,e,n)=>e in t?Re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>Ue(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function I(){}function ve(t){return t()}function ae(){return Object.create(null)}function H(t){t.forEach(ve)}function ge(t){return typeof t=="function"}function je(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xe(t){return Object.keys(t).length===0}function oe(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function V(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function X(){return R(" ")}function Te(){return R("")}function be(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Ne(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.data!==e&&(t.data=e)}let te;function x(t){te=t}const S=[],ce=[];let D=[];const le=[],Be=Promise.resolve();let Z=!1;function We(){Z||(Z=!0,Be.then(_e))}function ee(t){D.push(t)}const K=new Set;let q=0;function _e(){if(q!==0)return;const t=te;do{try{for(;q<S.length;){const e=S[q];q++,x(e),Ve(e.$$)}}catch(e){throw S.length=0,q=0,e}for(x(null),S.length=0,q=0;ce.length;)ce.pop()();for(let e=0;e<D.length;e+=1){const n=D[e];K.has(n)||(K.add(n),n())}D.length=0}while(S.length);for(;le.length;)le.pop()();Z=!1,K.clear(),x(t)}function Ve(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ee)}}function He(t){const e=[],n=[];D.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),D=e}const Me=new Set;function Fe(t,e){t&&t.i&&(Me.delete(t),t.i(e))}function Ge(t,e,n){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),ee(()=>{const i=t.$$.on_mount.map(ve).filter(ge);t.$$.on_destroy?t.$$.on_destroy.push(...i):H(i),t.$$.on_mount=[]}),s.forEach(ee)}function Ye(t,e){const n=t.$$;n.fragment!==null&&(He(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ke(t,e){t.$$.dirty[0]===-1&&(S.push(t),We(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ze(t,e,n,r,s,i,o=null,a=[-1]){const l=te;x(t);const c=t.$$={fragment:null,ctx:[],props:i,update:I,not_equal:s,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ae(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(d,w,...T)=>{const N=T.length?T[0]:w;return c.ctx&&s(c.ctx[d],c.ctx[d]=N)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](N),f&&Ke(t,d)),w}):[],c.update(),f=!0,H(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const d=Ne(e.target);c.fragment&&c.fragment.l(d),d.forEach(p)}else c.fragment&&c.fragment.c();e.intro&&Fe(t.$$.fragment),Ge(t,e.target,e.anchor),_e()}x(l)}class Qe{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){Ye(this,1),this.$destroy=I}$on(e,n){if(!ge(n))return I;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Je="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Je);var ue;(function(t){t[t.SCAN_MODE_LOW_POWER=0]="SCAN_MODE_LOW_POWER",t[t.SCAN_MODE_BALANCED=1]="SCAN_MODE_BALANCED",t[t.SCAN_MODE_LOW_LATENCY=2]="SCAN_MODE_LOW_LATENCY"})(ue||(ue={}));var de;(function(t){t[t.CONNECTION_PRIORITY_BALANCED=0]="CONNECTION_PRIORITY_BALANCED",t[t.CONNECTION_PRIORITY_HIGH=1]="CONNECTION_PRIORITY_HIGH",t[t.CONNECTION_PRIORITY_LOW_POWER=2]="CONNECTION_PRIORITY_LOW_POWER"})(de||(de={}));/*! Capacitor: https://capacitorjs.com/ - MIT License */const Xe=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(i,o)=>{n.platforms.set(i,o)},s=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=s,n},Ze=t=>t.CapacitorPlatforms=Xe(t),Ee=Ze(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Ee.addPlatform;Ee.setPlatform;var U;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(U||(U={}));class z extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const et=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},tt=t=>{var e,n,r,s,i;const o=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},l=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,f=()=>o!==null?o.name:et(t),d=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||f,w=()=>d()!=="web",T=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||w,N=h=>{const m=M.get(h);return!!(m!=null&&m.platforms.has(d())||re(h))},Oe=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||N,Ce=h=>{var m;return(m=a.PluginHeaders)===null||m===void 0?void 0:m.find(k=>k.name===h)},re=((s=c==null?void 0:c.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||Ce,$e=h=>t.console.error(h),ke=(h,m,k)=>Promise.reject(`${k} does not have an implementation of "${m}".`),M=new Map,Ae=(h,m={})=>{const k=M.get(h);if(k)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),k.proxy;const C=d(),A=re(h);let P;const Se=async()=>(!P&&C in m?P=typeof m[C]=="function"?P=await m[C]():P=m[C]:o!==null&&!P&&"web"in m&&(P=typeof m.web=="function"?P=await m.web():P=m.web),P),De=(v,g)=>{var _,L;if(A){const O=A==null?void 0:A.methods.find(b=>g===b.name);if(O)return O.rtype==="promise"?b=>a.nativePromise(h,g.toString(),b):(b,B)=>a.nativeCallback(h,g.toString(),b,B);if(v)return(_=v[g])===null||_===void 0?void 0:_.bind(v)}else{if(v)return(L=v[g])===null||L===void 0?void 0:L.bind(v);throw new z(`"${h}" plugin is not implemented on ${C}`,U.Unimplemented)}},F=v=>{let g;const _=(...L)=>{const O=Se().then(b=>{const B=De(b,v);if(B){const W=B(...L);return g=W==null?void 0:W.remove,W}else throw new z(`"${h}.${v}()" is not implemented on ${C}`,U.Unimplemented)});return v==="addListener"&&(O.remove=async()=>g()),O};return _.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(_,"name",{value:v,writable:!1,configurable:!1}),_},se=F("addListener"),ie=F("removeListener"),Ie=(v,g)=>{const _=se({eventName:v},g),L=async()=>{const b=await _;ie({eventName:v,callbackId:b},g)},O=new Promise(b=>_.then(()=>b({remove:L})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},O},G=new Proxy({},{get(v,g){switch(g){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?Ie:se;case"removeListener":return ie;default:return F(g)}}});return l[h]=G,M.set(h,{name:h,proxy:G,platforms:new Set([...Object.keys(m),...A?[C]:[]])}),G},qe=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||Ae;return a.convertFileSrc||(a.convertFileSrc=h=>h),a.getPlatform=d,a.handleError=$e,a.isNativePlatform=T,a.isPluginAvailable=Oe,a.pluginMethodNoop=ke,a.registerPlugin=qe,a.Exception=z,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},nt=t=>t.Capacitor=tt(t),$=nt(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ne=$.registerPlugin;$.Plugins;class Pe{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let i=this.retainedEventArguments[e];i||(i=[]),i.push(n),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new $.Exception(e,U.Unimplemented)}unavailable(e="not available"){return new $.Exception(e,U.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const fe=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),he=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class rt extends Pe{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=he(s).trim(),i=he(i).trim(),n[s]=i}),n}async setCookie(e){try{const n=fe(e.key),r=fe(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ne("CapacitorCookies",{web:()=>new rt});const st=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),it=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=t[e[o]],s),{})},at=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[i,o]=s;let a,l;return Array.isArray(o)?(l="",o.forEach(c=>{a=e?encodeURIComponent(c):c,l+=`${i}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${i}=${a}`),`${r}&${l}`},"").substr(1):null,ot=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=it(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))i.set(o,a);n.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{i.append(l,a)});else for(const a of Object.keys(t.data))i.append(a,t.data[a]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class ct extends Pe{async request(e){const n=ot(e,e.webFetchExtra),r=at(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,i=await fetch(s,n),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let l,c;switch(a){case"arraybuffer":case"blob":c=await i.blob(),l=await st(c);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const f={};return i.headers.forEach((d,w)=>{f[w]=d}),{data:l,headers:f,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ne("CapacitorHttp",{web:()=>new ct});function lt(t){return new DataView(Uint8Array.from(t).buffer)}function Le(t){return Array.from(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function ut(t){return`0000${t.toString(16).padStart(4,"0")}-0000-1000-8000-00805f9b34fb`}function dt(t){const e=t.trim().split(" ").filter(n=>n!=="").map(n=>parseInt(n,16));return lt(e)}function Q(t){return Le(t).map(e=>{let n=e.toString(16);return n.length==1&&(n="0"+n),n}).join(" ")}function Lt(t){if(typeof t=="string")return t;if(typeof t=="number")return ut(t);throw new Error("Invalid UUID")}function Ot(t){const e={};if(t)return t.forEach((n,r)=>{e[r.toString()]=n}),e}const ft="modulepreload",ht=function(t){return"/ble-explorer/"+t},we={},wt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=ht(a),a in we)return;we[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":ft,l||(f.as="script",f.crossOrigin=""),f.href=a,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((d,w)=>{f.addEventListener("load",d),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},u=ne("BluetoothLe",{web:()=>wt(()=>import("./web-BmnFPgND.js"),[]).then(t=>new t.BluetoothLeWeb)}),mt=()=>{let t=Promise.resolve();return e=>new Promise((n,r)=>{t=t.then(()=>e()).then(n).catch(r)})};function J(t){return t?mt():e=>e()}function y(t){if(typeof t!="string")throw new Error(`Invalid UUID type ${typeof t}. Expected string.`);if(t=t.toLowerCase(),!(t.search(/^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$/)>=0))throw new Error(`Invalid UUID format ${t}. Expected 128 bit string (e.g. "0000180d-0000-1000-8000-00805f9b34fb").`);return t}class yt{constructor(){this.scanListener=null,this.eventListeners=new Map,this.queue=J(!0)}enableQueue(){this.queue=J(!0)}disableQueue(){this.queue=J(!1)}async initialize(e){await this.queue(async()=>{await u.initialize(e)})}async isEnabled(){return await this.queue(async()=>(await u.isEnabled()).value)}async requestEnable(){await this.queue(async()=>{await u.requestEnable()})}async enable(){await this.queue(async()=>{await u.enable()})}async disable(){await this.queue(async()=>{await u.disable()})}async startEnabledNotifications(e){await this.queue(async()=>{var n;const r="onEnabledChanged";await((n=this.eventListeners.get(r))===null||n===void 0?void 0:n.remove());const s=await u.addListener(r,i=>{e(i.value)});this.eventListeners.set(r,s),await u.startEnabledNotifications()})}async stopEnabledNotifications(){await this.queue(async()=>{var e;const n="onEnabledChanged";await((e=this.eventListeners.get(n))===null||e===void 0?void 0:e.remove()),this.eventListeners.delete(n),await u.stopEnabledNotifications()})}async isLocationEnabled(){return await this.queue(async()=>(await u.isLocationEnabled()).value)}async openLocationSettings(){await this.queue(async()=>{await u.openLocationSettings()})}async openBluetoothSettings(){await this.queue(async()=>{await u.openBluetoothSettings()})}async openAppSettings(){await this.queue(async()=>{await u.openAppSettings()})}async setDisplayStrings(e){await this.queue(async()=>{await u.setDisplayStrings(e)})}async requestDevice(e){return e=e?this.validateRequestBleDeviceOptions(e):void 0,await this.queue(async()=>await u.requestDevice(e))}async requestLEScan(e,n){e=this.validateRequestBleDeviceOptions(e),await this.queue(async()=>{var r;await((r=this.scanListener)===null||r===void 0?void 0:r.remove()),this.scanListener=await u.addListener("onScanResult",s=>{const i=Object.assign(Object.assign({},s),{manufacturerData:this.convertObject(s.manufacturerData),serviceData:this.convertObject(s.serviceData),rawAdvertisement:s.rawAdvertisement?this.convertValue(s.rawAdvertisement):void 0});n(i)}),await u.requestLEScan(e)})}async stopLEScan(){await this.queue(async()=>{var e;await((e=this.scanListener)===null||e===void 0?void 0:e.remove()),this.scanListener=null,await u.stopLEScan()})}async getDevices(e){if(!Array.isArray(e))throw new Error("deviceIds must be an array");return this.queue(async()=>(await u.getDevices({deviceIds:e})).devices)}async getConnectedDevices(e){if(!Array.isArray(e))throw new Error("services must be an array");return e=e.map(y),this.queue(async()=>(await u.getConnectedDevices({services:e})).devices)}async connect(e,n,r){await this.queue(async()=>{var s;if(n){const i=`disconnected|${e}`;await((s=this.eventListeners.get(i))===null||s===void 0?void 0:s.remove());const o=await u.addListener(i,()=>{n(e)});this.eventListeners.set(i,o)}await u.connect(Object.assign({deviceId:e},r))})}async createBond(e,n){await this.queue(async()=>{await u.createBond(Object.assign({deviceId:e},n))})}async isBonded(e){return await this.queue(async()=>(await u.isBonded({deviceId:e})).value)}async disconnect(e){await this.queue(async()=>{await u.disconnect({deviceId:e})})}async getServices(e){return await this.queue(async()=>(await u.getServices({deviceId:e})).services)}async discoverServices(e){await this.queue(async()=>{await u.discoverServices({deviceId:e})})}async getMtu(e){return await this.queue(async()=>(await u.getMtu({deviceId:e})).value)}async requestConnectionPriority(e,n){await this.queue(async()=>{await u.requestConnectionPriority({deviceId:e,connectionPriority:n})})}async readRssi(e){return await this.queue(async()=>{const r=await u.readRssi({deviceId:e});return parseFloat(r.value)})}async read(e,n,r,s){return n=y(n),r=y(r),await this.queue(async()=>{const o=await u.read(Object.assign({deviceId:e,service:n,characteristic:r},s));return this.convertValue(o.value)})}async write(e,n,r,s,i){return n=y(n),r=y(r),this.queue(async()=>{if(!(s!=null&&s.buffer))throw new Error("Invalid data.");let o=s;$.getPlatform()!=="web"&&(o=Q(s)),await u.write(Object.assign({deviceId:e,service:n,characteristic:r,value:o},i))})}async writeWithoutResponse(e,n,r,s,i){n=y(n),r=y(r),await this.queue(async()=>{if(!(s!=null&&s.buffer))throw new Error("Invalid data.");let o=s;$.getPlatform()!=="web"&&(o=Q(s)),await u.writeWithoutResponse(Object.assign({deviceId:e,service:n,characteristic:r,value:o},i))})}async readDescriptor(e,n,r,s,i){return n=y(n),r=y(r),s=y(s),await this.queue(async()=>{const a=await u.readDescriptor(Object.assign({deviceId:e,service:n,characteristic:r,descriptor:s},i));return this.convertValue(a.value)})}async writeDescriptor(e,n,r,s,i,o){return n=y(n),r=y(r),s=y(s),this.queue(async()=>{if(!(i!=null&&i.buffer))throw new Error("Invalid data.");let a=i;$.getPlatform()!=="web"&&(a=Q(i)),await u.writeDescriptor(Object.assign({deviceId:e,service:n,characteristic:r,descriptor:s,value:a},o))})}async startNotifications(e,n,r,s){n=y(n),r=y(r),await this.queue(async()=>{var i;const o=`notification|${e}|${n}|${r}`;await((i=this.eventListeners.get(o))===null||i===void 0?void 0:i.remove());const a=await u.addListener(o,l=>{s(this.convertValue(l==null?void 0:l.value))});this.eventListeners.set(o,a),await u.startNotifications({deviceId:e,service:n,characteristic:r})})}async stopNotifications(e,n,r){n=y(n),r=y(r),await this.queue(async()=>{var s;const i=`notification|${e}|${n}|${r}`;await((s=this.eventListeners.get(i))===null||s===void 0?void 0:s.remove()),this.eventListeners.delete(i),await u.stopNotifications({deviceId:e,service:n,characteristic:r})})}validateRequestBleDeviceOptions(e){return e.services&&(e.services=e.services.map(y)),e.optionalServices&&(e.optionalServices=e.optionalServices.map(y)),e}convertValue(e){return typeof e=="string"?dt(e):e===void 0?new DataView(new ArrayBuffer(0)):e}convertObject(e){if(e===void 0)return;const n={};for(const r of Object.keys(e))n[r]=this.convertValue(e[r]);return n}}const j=new yt;function vt(t){let e,n,r;return{c(){e=V("button"),e.textContent="Connect"},m(s,i){E(s,e,i),n||(r=be(e,"click",t[2]),n=!0)},p:I,d(s){s&&p(e),n=!1,r()}}}function gt(t){let e,n=t[0].name+"",r,s,i,o,a,l,c,f=t[1]&&me(t);return{c(){e=R("Connected to: "),r=R(n),s=X(),i=V("button"),i.textContent="Read battery level",o=X(),f&&f.c(),a=Te()},m(d,w){E(d,e,w),E(d,r,w),E(d,s,w),E(d,i,w),E(d,o,w),f&&f.m(d,w),E(d,a,w),l||(c=be(i,"click",t[3]),l=!0)},p(d,w){w&1&&n!==(n=d[0].name+"")&&pe(r,n),d[1]?f?f.p(d,w):(f=me(d),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},d(d){d&&(p(e),p(r),p(s),p(i),p(o),p(a)),f&&f.d(d),l=!1,c()}}}function me(t){let e,n;return{c(){e=R("Last battery reading: "),n=R(t[1])},m(r,s){E(r,e,s),E(r,n,s)},p(r,s){s&2&&pe(n,r[1])},d(r){r&&(p(e),p(n))}}}function bt(t){let e,n,r;function s(a,l){return a[0].deviceId?gt:vt}let i=s(t),o=i(t);return{c(){e=V("main"),n=V("div"),n.textContent="This is a BLE test tool",r=X(),o.c()},m(a,l){E(a,e,l),oe(e,n),oe(e,r),o.m(e,null)},p(a,[l]){i===(i=s(a))&&o?o.p(a,l):(o.d(1),o=i(a),o&&(o.c(),o.m(e,null)))},i:I,o:I,d(a){a&&p(e),o.d()}}}const ye="0000180f-0000-1000-8000-00805f9b34fb",pt="00002a19-0000-1000-8000-00805f9b34fb";function _t(t,e,n){let r={};async function s(){await j.initialize({androidNeverForLocation:!0}),n(0,r=await j.requestDevice({services:[],optionalServices:[ye]})),await j.disconnect(r.deviceId),await j.connect(r.deviceId)}let i;async function o(){let a=await j.read(r.deviceId,ye,pt);console.log(a),n(1,i=Le(a))}return[r,i,s,o]}class Et extends Qe{constructor(e){super(),ze(this,e,_t,bt,je,{})}}new Et({target:document.getElementById("app")});export{Pe as W,dt as h,Ot as m,Lt as w};
